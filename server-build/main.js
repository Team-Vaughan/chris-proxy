!function(e){var t={};function r(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("react-dom/server.js")},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("newrelic")},function(e,t){e.exports=require("express-redis-cache")},function(e,t,r){"use strict";r.r(t);var a=r(3),o=r.n(a),s=r(4),n=r.n(s),i=r(2),c=r.n(i),u=r(1),d=r.n(u);var m={languages:["German","Cambodian"],_id:"6011ac9ccc12956e8f8ef6a4",userId:106,name:"Orlando",joinDate:"Wed Dec 09 2020 20:27:48 GMT-0800 (Pacific Standard Time)",bio:"Voluptatibus quis eos ab id nulla sunt dolor vero. Aut provident nisi repudiandae ipsa aut magni. Qui accusamus porro totam amet corrupti. Cupiditate fuga tempore laboriosam labore earum.",avatarUrl:"https://fec-gnocchi-user-profile.s3.us-west-2.amazonaws.com/1611771036329.jpg",isSuperhost:!0,identityVerified:!0,responseRate:98,responseTime:"within an hour",__v:0},p=[{_id:"601cc636a2ee6f5240d003d3",room_id:"101",name:"Sleek",photo_id:"101100",caption:"Small Granite Keyboard",is_primary:!0,storage_url:"https://fec-gnocchi-user-profile.s3.us-west-2.amazonaws.com/Sleek101100.jpg",__v:0},{_id:"601cc638a2ee6f5240d003d4",room_id:"101",name:"Small",photo_id:"101101",caption:"Generic Steel Computer",is_primary:!1,storage_url:"https://fec-gnocchi-user-profile.s3.us-west-2.amazonaws.com/Small101101.jpg",__v:0},{_id:"601cc63aa2ee6f5240d003d5",room_id:"101",name:"Ergonomic",photo_id:"101102",caption:"Rustic Frozen Pizza",is_primary:!1,storage_url:"https://fec-gnocchi-user-profile.s3.us-west-2.amazonaws.com/Ergonomic101102.jpg",__v:0},{_id:"601cc63ba2ee6f5240d003d6",room_id:"101",name:"Handcrafted",photo_id:"101103",caption:"Generic Plastic Keyboard",is_primary:!1,storage_url:"https://fec-gnocchi-user-profile.s3.us-west-2.amazonaws.com/Handcrafted101103.jpg",__v:0},{_id:"601cc63da2ee6f5240d003d7",room_id:"101",name:"Incredible",photo_id:"101104",caption:"Rustic Frozen Table",is_primary:!1,storage_url:"https://fec-gnocchi-user-profile.s3.us-west-2.amazonaws.com/Incredible101104.jpg",__v:0}],l={__v:0,stayId:101,typeOfStay:"Private room",numGuests:1,numBaths:1,numBeds:1,numBedrooms:4,_id:"602c68795e4c664eb4dfe343",hostName:"Toby"},f="http://3.21.180.150:5005/",h="http://18.221.188.4:5002/",g="http://3.143.95.170:5007/",y=r(0),_=r.n(y),v=r(5),b=r.n(v),w=r(7),x=r.n(w),j=r(6),S=r.n(j),z=function(){var e=function(){var e=x()(S.a.mark((function e(t){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(t);case 2:r=e.sent,Function(r.data)();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.useEffect)((function(){e("/header"),e("/photos"),e("/summary"),e("/users")})),_.a.createElement("div",null,_.a.createElement("div",{id:"header"}),_.a.createElement("div",{id:"title-bar"}),_.a.createElement("div",{id:"main"}),_.a.createElement("div",{id:"summaryBar"}),_.a.createElement("div",{id:"users"}))};const O=c()();O.use("/",c.a.static("public")),O.use("/rooms/:id",c.a.static("public")),O.get("/header",async(e,t)=>{try{const e=await d.a.get("https://fec-gnocchi-user-profile.s3-us-west-2.amazonaws.com/header.js");t.send(e.data)}catch(e){console.error(e)}}),O.get("/photos",async(e,t)=>{try{const e=await d.a.get("https://sdc-photo-service-bundle.s3.us-east-2.amazonaws.com/photos-service.js");t.send(e.data)}catch(e){console.error(e)}}),O.get("/summary",async(e,t)=>{try{const e=await d.a.get("https://sdc-summary-service.s3.us-east-2.amazonaws.com/summary/summary.js");t.send(e.data)}catch(e){console.error(e)}}),O.get("/users",async(e,t)=>{try{const e=await d.a.get("https://fec-gnocchi-user-profile.s3-us-west-2.amazonaws.com/users.js");t.send(e.data)}catch(e){console.error(e)}}),O.get("/rooms/:id/summary",async(e,t)=>{const r=h;try{const a=await d.a.get(`${r}rooms/${e.params.id}/summary`);t.send(a.data)}catch(e){t.send(l)}}),O.get("/rooms/:id/getPhotosByRoomId",async(e,t)=>{const r=f||"http://localhost:5005/";try{const a=await d.a.get(`${r}rooms/${e.params.id}/getPhotosByRoomId`);a.data.forEach(e=>{null===e.is_primary&&(e.is_primary=!0)}),t.send(a.data)}catch(e){t.send(p)}}),O.get("/users/:id",async(e,t)=>{const r=g;try{const a=await d.a.get(`${r}/users/${e.params.id}`);t.send(a.data)}catch(e){t.send(m)}});var P=O;var q=(e,t)=>{const r=b.a.renderToString(_.a.createElement(z)),a=o.a.resolve("./public/index.html");n.a.readFile(a,"utf8",(e,a)=>e?(console.error("Something went wrong:",e),t.status(500).send("Oops, better luck next time!")):t.send(a.replace('<div id="root"></div>',`<div id="root">${r}</div>`)))};r(8);const E=process.env.PORT||5e3,T=r(9)();P.get("/rooms/:id",(e,t,r)=>{const a=e.params.id;a&&(t.express_redis_cache_name=a),r()},T.route({expire:5e3}),q);try{P.listen(E,()=>{console.log("Serving app at port "+E)})}catch(e){console.log("server failed to connect: "+e)}}]);